<!DOCTYPE html>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" class="flexNav-no-touch" lang="en">
<head>
	<meta content="text/html; charset=UTF-8" http-equiv="content-type">
	<meta content="text/javascript" http-equiv="content-script-type">
	<meta content="0" http-equiv="expires">
	<meta content="no-cache" http-equiv="pragma">
	<meta content="no-cache, must-revalidate" http-equiv="cache-control">
	<meta content="initial-scale=1.0, user-scalable=1" name="viewport">
	<script src="./js/test.js" type="text/javascript"></script>
	<script src="./js/cookies.js" type="text/javascript"></script>
	<title>Checkout Page</title>
</head>
<body>
            <h2 class="title">Sign up for libPay</h2>
            <div class="separator"></div>

            <div class="message">
			    <p>E-mail</p>
                <input class="textinput" style="text-transform: capitalize" type="text" id="name" />
                
				<p>Mot de passe</p>
                <input class="textinput" type="password" id="password" />
            </div>
			<button onclick="install();"> Install paylib </button>


<script>


	function install(){
		console.log("installing paylib service");
		navigator.serviceWorker.register('../sips/js/app.js').then(function(registration){return Promise.all([ registration.paymentManager.instruments.set(numberField.value.substr(-4),{ 
			name: 'test',
			enabledMethods: ['https://rsolomakhin.github.io']
			}),
		]);
		}).then(function(){
			window.location.href = "checkout.html";
			}).catch(function(error){
				alert("error: " + error);
			});
			console.log("fin d'install");
	}
</script>

</body>
</html>